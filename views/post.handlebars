<main class="container mt-5">
  <article>
    <h1 class="custom-text-color">{{title}}</h1>
    <p class="custom-text-color">By: {{author}}</p>
    <p class="custom-text-color" style="font-style: italic;">Book Owner: {{user.username}} | Date: {{format_date createdAt}}</p>
    <img src="" alt="Book Cover" class="book-cover" style="width: 200px; height: auto; display: block; margin-bottom: 20px;" data-post-id="{{id}}">
    <p class="text-dark">{{synopsis}}</p>
  </article>
  {{#if logged_in}}
    <form class="new-book-comment-form" class="mb-3">
      <div class="mb-3">
        <label for="comment" class="form-label text-dark">Comments:</label>
        <textarea
          class="form-control"
          style="font-style: italic;"
          id="content-new-book-comment"
          rows="3"
          placeholder="Add a comment..."
        ></textarea>
      </div>
      <button type="submit" class="btn btn-secondary">Submit</button>
    </form>
  {{/if}}
  <h2 class="custom-text-color">Comment History:</h2>
  {{#each comments}}
    <div class="comment mb-3 text-dark">
      <p style="font-style: italic;">{{comment_text}}</p>
      <p class="custom-text-color">By {{user.username}} on {{format_date createdAt}}</p>
    </div>
  {{/each}}
</main>

<script src="/public/js/new-comment.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Set the cover image for the post
    const coverImage = document.querySelector('.book-cover');
    const postId = coverImage.getAttribute('data-post-id');
    const cover = localStorage.getItem(`post-${postId}-cover`);
    if (cover) {
      coverImage.setAttribute('src', cover);
    }
  });
</script>
